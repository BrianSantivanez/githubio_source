<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Legacy Object Masks - https://softlayer.github.io/</title>
    <link rel="canonical" href="https://softlayer.github.io/article/Legacy-Object-Masks/">
        <link rel="stylesheet" href="https://softlayer.github.io/css/main.css">
    <link href="https://softlayer.github.io/css/bootstrap.css" rel="stylesheet">
    <link href="https://softlayer.github.io/css/font-awesome.css" rel="stylesheet">
    <link href="https://softlayer.github.io/css/custom.css" rel="stylesheet">
    <link href="https://softlayer.github.io/css/highlight/solarized_dark.css" rel="stylesheet">

    <script src="https://softlayer.github.io/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://softlayer.github.io/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://softlayer.github.io/js/jquery-3.3.1.min.js"></script> 
    <script src="https://softlayer.github.io/js/sldn.js"></script>

    
	<script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
		})
	</script>
    
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-88235803-1', 'auto');
ga('send', 'pageview');
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://softlayer.github.io/">SoftLayer API</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="https://softlayer.github.io/article/">Articles</a></li>
                    
                        <li><a href="https://softlayer.github.io/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://softlayer.github.io/go/">Go</a></li>
                    
                        <li><a href="https://softlayer.github.io/php/">PHP</a></li>
                    
                        <li><a href="https://softlayer.github.io/perl/">Perl</a></li>
                    
                        <li><a href="https://softlayer.github.io/python/">Python</a></li>
                    
                        <li><a href="https://softlayer.github.io/rest/">Rest</a></li>
                    
                        <li><a href="https://softlayer.github.io/ruby/">Ruby</a></li>
                    
                        <li><a href="https://softlayer.github.io/tools/">Tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="https://www.bing.com/">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:softlayer.github.io" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>June 20, 2011<br></h4>
            </div>
        </div>
        <div class="col-md-9">
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://softlayer.github.io/tags/article">article</a>
                
                    <a class="label label-danger" href="https://softlayer.github.io/tags/sldn">sldn</a>
                
                    <a class="label label-danger" href="https://softlayer.github.io/tags/debugging">debugging</a>
                
                    <a class="label label-danger" href="https://softlayer.github.io/tags/deprecated">deprecated</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-md-12">
            <div class="well well-sm release-note" style="word-wrap: break-word;">
                <h3>Legacy Object Masks<br> <small>(DEPRECIATED) Dealing with Legacy Object Masks</small></h3>
                
                
                    <div class="alert alert-info alert-dismissable" style="margin-top:25px;margin-bottom:5px;">
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                        <strong>Hey, listen!</strong><br>
                        This example contains deprecated methods or syntax and needs to be updated. Please use caution when using.
                    </div>
                
                
                

<p><script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc10">
<div class="toc-title">Table of contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
<li class="toc-level-1"><a href="#Structure">Structure</a></li>
<li class="toc-level-1"><a href="#Creating_an_Object_Mask">Creating an Object Mask</a></li>
<li class="toc-level-1"><a href="#Referenced_API_Components">Referenced API Components</a>
<ol>
<li class="toc-level-2"><a href="#Services">Services</a></li>
<li class="toc-level-2"><a href="#Data_Types">Data Types</a></li>
</ol>
</li>
<li class="toc-level-1"><a href="#Internal_Links">Internal Links</a></li>
</ol>
</div>
</div>
Most of the data types modeled in the SoftLayer API contain relational properties that tie one data type to another. For instance, a SoftLayer_Account has links to its domains, support tickets, hardware, users, and much more. By default, calling the [[SoftLayer_Account]] service&rsquo;s <code>getObject</code> method won&rsquo;t retrieve relational and count properties. In order to retrieve this information, you would have to call getUsers, getTickets, and other methods. Making multiple API calls can significantly slow down an API-based application&rsquo;s response time, especially if the application retrieves a large amount of information at once. An alternative to making multiple method calls is to define an object mask in your method&rsquo;s header to retrieve all the information you need with a single call.  Defining an object mask can result in a very noticeable increase in overall API responsiveness. While object masks are optional, they are the only way to retrieve a data type&rsquo;s count properties.</p>

<h2 id="structure">Structure</h2>

<p>An object mask is an object of the type <prefix>ObjectMask where <prefix> is the name of the service you are accessing, “SoftLayer_AccountObjectMask” in this example. The structure within an object mask is determined by the one making the API method call. No values are defined in an object mask - only the relational data you wish to retrieve. To retrieve a relational or count property, simply add an empty property to your request&rsquo;s object mask with the name of the properties you are trying to receive.</p>

<p>In the example below we are retrieving multiple sets of information, some of which is part of a hierarchy and some stands alone.  We are first retrieving all domains and the resource records associated to those domains.  The next information queried is all open tickets.  As a part of the open tickets, we will be looking for assigned users, attached hardware and all updates to be returned.  Finally, we will query a count of all users associated with this account. The following Object Mask structure will help us retrieve all of that information.</p>

<pre><code>*Domains
**resourceRecords
*openTickets
**assignedUser
**attachedHardware
**updates
*userCount
</code></pre>

<p>In this level of the object mask, the &ldquo;domains&rdquo;, &ldquo;openTickets&rdquo;, and &ldquo;userCount&rdquo; (all first level properties) are directly related to the SoftLayer_Account data type.  The &ldquo;resourceRecords&rdquo;, &ldquo;assignedUser&rdquo;, &ldquo;attachedHardware&rdquo; and &ldquo;updates&rdquo; properties are considered second level properties, which are related to the first level properties they are nested under. Domains have resource records, and tickets have users, hardware, and updates. Create an object mask with this structure and send it in the header to a call to getObject in the SoftLayer_Account service to retrieve all of this data.</p>

<h2 id="creating-an-object-mask">Creating an Object Mask</h2>

<p>Languages that support SOAP usually have built-in mechanisms to add headers to a SOAP call (i.e. the [<a href="http://php.net/manual/en/class.soapheader.php">http://php.net/manual/en/class.soapheader.php</a> SoapHeader] PHP class).  When building manual SOAP calls, format your request XML similar to the following (assuming you&rsquo;re retrieving the structure above from the SoftLayer_Account service):</p>

<pre><code class="language-xml">&lt;xml&gt;
&lt;SoftLayer_AccountObjectMask xsi:type=&quot;v3:SoftLayer_AccountObjectMask&quot;&gt;
    &lt;mask xsi:type=&quot;slt:SoftLayer_Account&quot; xmlns:slt=&quot;http://api.service.softlayer.com/soap/v3/SLTypes/&quot;&gt;
        &lt;domains&gt;
            &lt;resourceRecords /&gt;
        &lt;/domains&gt;
        &lt;openTickets&gt;
            &lt;assignedUser /&gt;
            &lt;attachedHardware /&gt;
            &lt;updates /&gt;
        &lt;/openTickets&gt;
        &lt;userCount /&gt;
    &lt;/mask&gt;
&lt;/SoftLayer_AccountObjectMask&gt;
&lt;/xml&gt;
</code></pre>

<p>Again, note that we&rsquo;re not setting any values, just empty records for the data we wish to retrieve. Since XML-RPC treats data as array keys and values, its structure is quite different:</p>

<pre><code class="language-xml">&lt;xml&gt;
&lt;struct&gt;
    &lt;member&gt;
        &lt;name&gt;SoftLayer_AccountObjectMask&lt;/name&gt;
        &lt;value&gt;
             &lt;struct&gt;
                &lt;member&gt;
                    &lt;name&gt;mask&lt;/name&gt;
                    &lt;value&gt;
                        &lt;struct&gt;
                            &lt;member&gt;
                                &lt;name&gt;domains&lt;/name&gt;
                                &lt;value&gt;
                                    &lt;struct&gt;
                                        &lt;member&gt;
                                            &lt;name&gt;resourceRecords&lt;/name&gt;
                                            &lt;value&gt;
                                                &lt;array&gt;
                                                    &lt;data/&gt;
                                                &lt;/array&gt;
                                            &lt;/value&gt;
                                        &lt;/member&gt;
                                    &lt;/struct&gt;
                                &lt;/value&gt;
                            &lt;/member&gt;
                            &lt;member&gt;
                                &lt;name&gt;openTickets&lt;/name&gt;
                                &lt;value&gt;
                                    &lt;struct&gt;
                                        &lt;member&gt;
                                            &lt;name&gt;assignedUser&lt;/name&gt;
                                            &lt;value&gt;
                                                &lt;array&gt;
                                                    &lt;data/&gt;
                                                &lt;/array&gt;
                                            &lt;/value&gt;
                                        &lt;/member&gt;
                                        &lt;member&gt;
                                            &lt;name&gt;attachedHardware&lt;/name&gt;
                                            &lt;value&gt;
                                                &lt;array&gt;
                                                    &lt;data/&gt;
                                                &lt;/array&gt;
                                            &lt;/value&gt;
                                        &lt;/member&gt;
                                        &lt;member&gt;
                                            &lt;name&gt;updates&lt;/name&gt;
                                            &lt;value&gt;
                                                &lt;array&gt;
                                                    &lt;data/&gt;
                                                &lt;/array&gt;
                                            &lt;/value&gt;
                                        &lt;/member&gt;
                                    &lt;/struct&gt;
                                &lt;/value&gt;
                            &lt;/member&gt;
                            &lt;member&gt;
                                &lt;name&gt;userCount&lt;/name&gt;
                                &lt;value&gt;
                                    &lt;array&gt;
                                        &lt;data/&gt;
                                    &lt;/array&gt;
                                &lt;/value&gt;
                            &lt;/member&gt;
                        &lt;/struct&gt;
                    &lt;/value&gt;
                &lt;/member&gt;
            &lt;/struct&gt;
        &lt;/value&gt;
    &lt;/member&gt;
&lt;/struct&gt;
&lt;/xml&gt;
</code></pre>

<p>Most programming and scripting languages with SOAP and XML-RPC support have built-in methods to create request headers, but if formatting a call manually then place XML like the values above into the headers of your requests.</p>

<p>##Referenced API Components
###Services
[[SoftLayer_Account]]
###Data Types
[[SoftLayer_Account]]
##Internal Links
[[Implementing SOAP in Perl]]
[[Object Masks and Filters in C Sharp]]</p>

            </div>
        </div>

    </div>
    <hr>
    <div class="row">
            
        <div class="col-md-6">
            
<div class="panel panel-default">
    <div class="panel-heading" style="padding: 2px 15px;">
        <h4>More Documentation</h4>
    </div>
    <div class="panel-body">
        <a href="https://softlayer.github.com/reference/softlayerapi"><i class="fa fa-link"></i> SoftLayer API Reference<br></a>
        <a href="https://github.com/softlayer/softlayer-java"><i class="fa fa-github"></i> softlayer-java<br></a>
        <a href="https://github.com/softlayer/softlayer-api-perl-client"><i class="fa fa-github"></i> softlayer-perl<br></a>
        <a href="https://github.com/softlayer/softlayer-api-php-client"><i class="fa fa-github"></i> softlayer-php<br></a>
        <a href="https://github.com/softlayer/softlayer-python"><i class="fa fa-github"></i> softlayer-python<br></a>
        <a href="https://github.com/softlayer/softlayer-ruby"><i class="fa fa-github"></i> softlayer-ruby<br></a>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading text-center" style="padding: 2px 15px;">
      <a href="https://www.facebook.com/IBMBluemixIaaS/"><i class="fa fa-facebook-square" alt="facebook"></i> </a>
      <a href="https://twitter.com/IBMBluemixIaaS"><i class="fa fa-twitter" alt="twitter"></i> </a>
      <a href="http://www.linkedin.com/company/softlayer-technologies-inc-" alt="linked-in"><i class="fa fa-linkedin-square"></i> </a>
      <a href="https://github.com/softlayer"><i class="fa fa-github" alt="github"></i> </a>
      <a href="irc://irc.freenode.net/softlayer"><i class="fa fa-comment" alt="irc"></i> </a>
    </div>
</div>

        </div>
        <div class="col-md-6">
            <div class="well well-sm" style="word-wrap: break-word;"> 
                <strong>Feedback? <span class="fa fa-comment"/></strong>
                    <p>
                        We would love to hear it<br>
                        <a class="" href="https://github.com/softlayer/api_examples/issues/new?title=Feedback%20for%20article%20-%20Legacy%20Object%20Masks&body=Feedback+regarding%3A%20https%3a%2f%2fsoftlayer.github.io%2farticle%2fLegacy-Object-Masks%2f"><span class="fa fa-github-square"/> Open an issue</a>
                    </p>
            </div>
        </div>

    </div>
        <footer>
            <div class="row">
                <hr>
                <div class="col-sm-12">
                    <p>&copy; SoftLayer 2015<br>
                    Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
                </div>
            </div>
        </footer>
</div>

    <script src="https://softlayer.github.io/js/jquery.js"></script>
    <script src="https://softlayer.github.io/js/bootstrap.js"></script>
</body>
</html>

/article/Legacy-Object-Masks/
